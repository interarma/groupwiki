var update_ckgeditInternalLink,update_ckgeditMediaLink;var fckgInternalInputId,fckgMediaInputId;window.onbeforeunload=function(){};CKEDITOR.dialog.add("link",function(b){var v=oDokuWiki_FCKEditorInstance.dwiki_doku_base;var M=CKEDITOR.plugins.link;var f=new Object();f.doku_base=new RegExp("^"+v.replace(/\//g,"\\/"),"g");f.media_internal=/lib\/exe\/fetch\.php\/(.*)/;f.media_rewrite_1=/^_media\/(.*)/;f.media_rewrite_1Doku_Base=new RegExp("^"+v+"_media/(.*)");f.media_rewrite_2=/exe\/fetch.php\?media=(.*)/;f.internal_link=/doku.php\?id=(.*)/;f.internal_link_rewrite_2=/doku.php\/(.*)/;f.internal_link_rewrite_1=new RegExp("^"+v+"(?!_media)(.*)");f.samba=/file:\/\/\/\/\/(.*)/;f.samba_unsaved=/^\\\\\w+(\\\w.*)/;b.config.linkShowTargetTab=false;var z;var n=function(){var Q=this.getDialog(),P=Q.getContentElement("target","popupFeatures"),R=Q.getContentElement("target","linkTargetName"),S=this.getValue();if(!P||!R){return}P=P.getElement();P.hide();R.setValue("");switch(S){case"frame":R.setLabel(b.lang.link.targetFrameName);R.getElement().show();break;case"popup":P.show();R.setLabel(b.lang.link.targetPopupName);R.getElement().show();break;default:R.setValue(S);R.getElement().hide();break}};var r=function(){var P=this.getDialog();var Q=P.getContentElement("advanced","msg");Q.focus();P.showPage("info")};var N=function(){return z};var l=function(){oDokuWiki_FCKEditorInstance.isLocalDwikiBrowser=false;oDokuWiki_FCKEditorInstance.isUrlExtern=false;oDokuWiki_FCKEditorInstance.isDwikiMediaFile=false;var S=this.getDialog(),V=["urlOptions","anchorOptions","emailOptions","internalOptions","mediaOptions","sambaOptions"],U=this.getValue(),T=S.definition.getContents("upload"),P=T&&T.hidden;if(U=="internal"){oDokuWiki_FCKEditorInstance.isLocalDwikiBrowser=true}else{if(U=="media"){oDokuWiki_FCKEditorInstance.isDwikiMediaFile=true}}if(U=="url"){oDokuWiki_FCKEditorInstance.isUrlExtern=true;if(b.config.linkShowTargetTab){S.showPage("target")}if(!P){S.showPage("upload")}}else{S.hidePage("target");if(!P){S.hidePage("upload")}}for(var R=0;R<V.length;R++){var Q=S.getContentElement("info",V[R]);if(!Q){continue}Q=Q.getElement().getParent().getParent();if(V[R]==U+"Options"){Q.show()}else{Q.hide()}}S.layout()};var G=/^javascript:/,H=/^mailto:([^?]+)(?:\?(.+))?$/,h=/subject=([^;?:@&=$,\/]*)/,O=/body=([^;?:@&=$,\/]*)/,s=/^#(.*)$/,c=/^((?:http|https|ftp|news):\/\/)?(.*)$/,t=/^(_(?:self|top|parent|blank))$/,o=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,E=/^javascript:([^(]+)\(([^)]+)\)$/;var a=/doku.php\?id=(.*)$/;var k=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/;var x=/(?:^|,)([^=]+)=(\d+|yes|no)/gi;var m=function(R,Q){var ag=(Q&&(Q.data("cke-saved-href")||Q.getAttribute("href")))||"",T,af,ad,U,Z={};if((T=ag.match(G))){if(j=="encode"){ag=ag.replace(o,function(ao,aq,ap){return"mailto:"+String.fromCharCode.apply(String,aq.split(","))+(ap&&q(ap))})}else{if(j){ag.replace(E,function(av,ax,ar){if(ax==F.name){Z.type="email";var aw=Z.email={};var ap=/[^,\s]+/g,aq=/(^')|('$)/g,ao=ar.match(ap),ay=ao.length,au,az;for(var at=0;at<ay;at++){az=decodeURIComponent(q(ao[at].replace(aq,"")));au=F.params[at].toLowerCase();aw[au]=az}aw.address=[aw.name,aw.domain].join("@")}})}}}if(!Z.type){if((ad=ag.match(s))){Z.type="anchor";Z.anchor={};Z.anchor.name=Z.anchor.id=ad[1]}else{if((af=ag.match(H))){var Y=ag.match(h),aa=ag.match(O);Z.type="email";var ab=(Z.email={});ab.address=af[1];Y&&(ab.subject=decodeURIComponent(Y[1]));aa&&(ab.body=decodeURIComponent(aa[1]))}else{if((U=ag.match(a))||(U=ag.match(f.internal_link_rewrite_2))||(U=ag.match(f.internal_link_rewrite_1))){Z.type="internal";Z.url={};Z.url.selected=U[1];Z.url.protocol="";Z.url.url=""}else{if((U=ag.match(f.media_internal))||(U=ag.match(f.media_rewrite_1))||(U=ag.match(f.media_rewrite_2))||(U=ag.match(f.media_rewrite_1Doku_Base))){Z.type="media";Z.url={};Z.url.protocol="";Z.url.url="";Z.url.selected=U[1]}else{if(U=ag.match(f.samba)){Z.type="samba";Z.url={};Z.url.url="";Z.url.protocol="";Z.url.selected="\\\\"+U[1].replace(/\//g,"\\")}else{if(U=ag.match(f.samba_unsaved)){Z.type="samba";Z.url={};Z.url.url="";Z.url.protocol="";Z.url.selected=U[0]}else{if(ag&&(U=ag.match(c))){Z.type="url";Z.url={};Z.url.protocol=U[1];Z.url.url=U[2]}else{Z.type="url"}}}}}}}}if(Q){var al=Q.getAttribute("target");Z.target={};Z.adv={};if(!al){var an=Q.data("cke-pa-onclick")||Q.getAttribute("onclick"),ai=an&&an.match(k);if(ai){Z.target.type="popup";Z.target.name=ai[1];var V;while((V=x.exec(ai[2]))){if((V[2]=="yes"||V[2]=="1")&&!(V[1] in {height:1,width:1,top:1,left:1})){Z.target[V[1]]=true}else{if(isFinite(V[2])){Z.target[V[1]]=V[2]}}}}}else{var am=al.match(t);if(am){Z.target.type=Z.target.name=al}else{Z.target.type="frame";Z.target.name=al}}var ak=this;var ac=function(ao,ap){var aq=Q.getAttribute(ap);if(aq!==null){Z.adv[ao]=aq||""}};ac("advId","id");ac("advLangDir","dir");ac("advAccessKey","accessKey");Z.adv.advName=Q.data("cke-saved-name")||Q.getAttribute("name")||"";ac("advLangCode","lang");ac("advTabIndex","tabindex");ac("advTitle","title");ac("advContentType","type");CKEDITOR.plugins.link.synAnchorSelector?Z.adv.advCSSClasses=D(Q):ac("advCSSClasses","class");ac("advCharset","charset");ac("advStyles","style");ac("advRel","rel")}var X=Z.anchors=[],ae,S,aj;if(CKEDITOR.plugins.link.emptyAnchorFix){var P=R.document.getElementsByTag("a");for(ae=0,S=P.count();ae<S;ae++){aj=P.getItem(ae);if(aj.data("cke-saved-name")||aj.hasAttribute("name")){X.push({name:aj.data("cke-saved-name")||aj.getAttribute("name"),id:aj.getAttribute("id")})}}}else{var ah=new CKEDITOR.dom.nodeList(R.document.$.anchors);for(ae=0,S=ah.count();ae<S;ae++){aj=ah.getItem(ae);X[ae]={name:aj.getAttribute("name"),id:aj.getAttribute("id")}}}if(CKEDITOR.plugins.link.fakeAnchor){var W=R.document.getElementsByTag("img");for(ae=0,S=W.count();ae<S;ae++){if((aj=CKEDITOR.plugins.link.tryRestoreFakeAnchor(R,W.getItem(ae)))){X.push({name:aj.getAttribute("name"),id:aj.getAttribute("id")})}}}this._.selectedElement=Q;return Z};var A=function(P){if(!P){return}P=P.replace(/^[\/\:]/,"");P=P.replace(/\//g,":");P=":"+P;document.getElementById(fckgInternalInputId).value=P};update_ckgeditInternalLink=A;var d=function(P){if(!P){return}P=P.replace(/^[\/\:]/,"");P=P.replace(/\//g,":");P=":"+P;document.getElementById(fckgMediaInputId).value=P};update_ckgeditMediaLink=d;var p=function(P){for(i in P){msg=i+"="+P[i];if(!confirm(msg)){break}}};var w=function(Q,P){if(P[Q]){this.setValue(P[Q][this.id]||"")}};var J=function(P){return w.call(this,"target",P)};var I=function(P){return w.call(this,"adv",P)};var K=function(Q,P){if(!P[Q]){P[Q]={}}P[Q][this.id]=this.getValue()||""};var y=function(P){return K.call(this,"target",P)};var L=function(P){return K.call(this,"adv",P)};function q(P){return P.replace(/\\'/g,"'")}function B(P){return P.replace(/'/g,"\\$&")}var j=b.config.emailProtection||"";if(j&&j!="encode"){var F={};j.replace(/^([^(]+)\(([^)]+)\)$/,function(P,Q,R){F.name=Q;F.params=[];R.replace(/[^,\s]+/g,function(S){F.params.push(S)})})}function e(R){var P,Q=F.name,V=F.params,T,U;P=[Q,"("];for(var S=0;S<V.length;S++){T=V[S].toLowerCase();U=R[T];S>0&&P.push(",");P.push("'",U?B(encodeURIComponent(R[T])):"","'")}P.push(")");return P.join("")}function u(Q){var P,T=Q.length,R=[];for(var S=0;S<T;S++){P=Q.charCodeAt(S);R.push(P)}return"String.fromCharCode("+R.join(",")+")"}function D(Q){var P=Q.getAttribute("class");return P?P.replace(/\s*(?:cke_anchor_empty|cke_anchor)(?:\s*$)?/g,""):""}var C=b.lang.common,g=b.lang.link;return{title:g.title,minWidth:375,minHeight:250,contents:[{id:"info",label:g.info,title:g.info,elements:[{id:"linkType",type:"select",label:g.type,"default":"url",items:[[g.toUrl,"url"],["internal link","internal"],["internal media","media"],[g.toEmail,"email"],["Samba share","samba"]],onChange:l,setup:function(P){if(P.type){this.setValue(P.type)}},commit:function(P){P.type=this.getValue()}},{type:"vbox",id:"urlOptions",children:[{type:"hbox",widths:["25%","75%"],children:[{id:"protocol",type:"select",label:C.protocol,"default":"http://",items:[["http://\u200E","http://"],["https://\u200E","https://"],["ftp://\u200E","ftp://"],["news://\u200E","news://"]],setup:function(P){if(P.url){this.setValue(P.url.protocol||"")}},commit:function(P){if(!P.url){P.url={}}P.url.protocol=this.getValue()}},{type:"text",id:"url",label:C.url,required:true,onLoad:function(){this.allowOnChange=true},onKeyUp:function(){this.allowOnChange=false;var R=this.getDialog().getContentElement("info","protocol"),P=this.getValue(),Q=/^(http|https|ftp|news):\/\/(?=.)/i,T=/^((javascript:)|[#\/\.\?])/i;var S=Q.exec(P);if(S){this.setValue(P.substr(S[0].length));R.setValue(S[0].toLowerCase())}else{if(T.test(P)){R.setValue("")}}this.allowOnChange=true},onChange:function(){if(this.allowOnChange){this.onKeyUp()}},validate:function(){var P=this.getDialog();if(P.getContentElement("info","linkType")&&P.getValueOf("info","linkType")!="url"){return true}if(this.getDialog().fakeObj){return true}var Q=CKEDITOR.dialog.validate.notEmpty(g.noUrl);return Q.apply(this)},setup:function(P){this.allowOnChange=false;if(P.url){this.setValue(P.url.url)}this.allowOnChange=true},commit:function(P){this.onChange();if(!P.url){P.url={}}P.url.url=this.getValue();this.allowOnChange=false}}],setup:function(P){if(!this.getDialog().getContentElement("info","linkType")){this.getElement().show()}}},{type:"button",id:"browse0",filebrowser:"info:url",label:C.browseServer},{type:"button",id:"getadvanced",onClick:r,label:"Advanced Options"}]},{type:"vbox",id:"internalOptions",children:[{type:"button",id:"browse1",hidden:"true",filebrowser:"info:url",label:C.browseServer},{type:"text",id:"internal",label:"internal link",required:true,setup:function(P){if(P){if(P.url&&P.url.selected){var Q=P.url.selected.replace(/^\:/,"");this.setValue(":"+Q)}}},},]},{type:"vbox",id:"mediaOptions",children:[{type:"button",id:"browse2",filebrowser:"info:url",label:C.browseServer},{type:"text",id:"media",label:"link to media file",required:true,setup:function(P){if(P){if(P.url&&P.url.selected){var Q=P.url.selected.replace(/^\:/,"");this.setValue(":"+Q)}}},},]},{type:"vbox",id:"sambaOptions",children:[{type:"html",id:"smb_msg",html:"Enter your share as: \\\\Server\\directory\\file",},{type:"text",id:"samba",width:"50",label:"Samba Share",required:true,setup:function(P){if(P.url&&P.url.selected){this.setValue(P.url.selected)}},},]},{type:"vbox",id:"anchorOptions",width:260,align:"center",padding:0,children:[{type:"fieldset",id:"selectAnchorText",label:g.selectAnchor,setup:function(P){if(P.anchors.length>0){this.getElement().show()}else{this.getElement().hide()}},children:[{type:"hbox",id:"selectAnchor",children:[{type:"select",id:"anchorName","default":"",label:g.anchorName,style:"width: 100%;",items:[[""]],setup:function(R){this.clear();this.add("");for(var Q=0;Q<R.anchors.length;Q++){if(R.anchors[Q].name){this.add(R.anchors[Q].name)}}if(R.anchor){this.setValue(R.anchor.name)}var P=this.getDialog().getContentElement("info","linkType");if(P&&P.getValue()=="email"){this.focus()}},commit:function(P){if(!P.anchor){P.anchor={}}P.anchor.name=this.getValue()}},{type:"select",id:"anchorId","default":"",label:g.anchorId,style:"width: 100%;",items:[[""]],setup:function(Q){this.clear();this.add("");for(var P=0;P<Q.anchors.length;P++){if(Q.anchors[P].id){this.add(Q.anchors[P].id)}}if(Q.anchor){this.setValue(Q.anchor.id)}},commit:function(P){if(!P.anchor){P.anchor={}}P.anchor.id=this.getValue()}}],setup:function(P){if(P.anchors.length>0){this.getElement().show()}else{this.getElement().hide()}}}]},{type:"html",id:"noAnchors",style:"text-align: center;",html:'<div role="note" tabIndex="-1">'+CKEDITOR.tools.htmlEncode(g.noAnchors)+"</div>",focus:true,setup:function(P){if(P.anchors.length<1){this.getElement().show()}else{this.getElement().hide()}}}],setup:function(P){if(!this.getDialog().getContentElement("info","linkType")){this.getElement().hide()}}},{type:"vbox",id:"emailOptions",padding:1,children:[{type:"text",id:"emailAddress",label:g.emailAddress,required:true,validate:function(){var P=this.getDialog();if(!P.getContentElement("info","linkType")||P.getValueOf("info","linkType")!="email"){return true}var Q=CKEDITOR.dialog.validate.notEmpty(g.noEmail);return Q.apply(this)},setup:function(Q){if(Q.email){this.setValue(Q.email.address)}var P=this.getDialog().getContentElement("info","linkType");if(P&&P.getValue()=="email"){this.select()}},commit:function(P){if(!P.email){P.email={}}P.email.address=this.getValue()}},{type:"text",id:"emailSubject",label:g.emailSubject,setup:function(P){if(P.email){this.setValue(P.email.subject)}},commit:function(P){if(!P.email){P.email={}}P.email.subject=this.getValue()}},{type:"textarea",id:"emailBody",label:g.emailBody,rows:3,"default":"",setup:function(P){if(P.email){this.setValue(P.email.body)}},commit:function(P){if(!P.email){P.email={}}P.email.body=this.getValue()}}],setup:function(P){if(!this.getDialog().getContentElement("info","linkType")){this.getElement().hide()}}}]},{id:"target",label:g.target,title:g.target,elements:[{type:"hbox",widths:["50%","50%"],children:[{type:"select",id:"linkTargetType",label:C.target,"default":"notSet",style:"width : 100%;",items:[[C.notSet,"notSet"],[g.targetFrame,"frame"],[g.targetPopup,"popup"],[C.targetNew,"_blank"],[C.targetTop,"_top"],[C.targetSelf,"_self"],[C.targetParent,"_parent"]],onChange:n,setup:function(P){if(P.target){this.setValue(P.target.type||"notSet")}n.call(this)},commit:function(P){if(!P.target){P.target={}}P.target.type=this.getValue()}},{type:"text",id:"linkTargetName",label:g.targetFrameName,"default":"",setup:function(P){if(P.target){this.setValue(P.target.name)}},commit:function(P){if(!P.target){P.target={}}P.target.name=this.getValue().replace(/\W/gi,"")}}]},{type:"vbox",width:"100%",align:"center",padding:2,id:"popupFeatures",children:[{type:"fieldset",label:g.popupFeatures,children:[{type:"hbox",children:[{type:"checkbox",id:"resizable",label:g.popupResizable,setup:J,commit:y},{type:"checkbox",id:"status",label:g.popupStatusBar,setup:J,commit:y}]},{type:"hbox",children:[{type:"checkbox",id:"location",label:g.popupLocationBar,setup:J,commit:y},{type:"checkbox",id:"toolbar",label:g.popupToolbar,setup:J,commit:y}]},{type:"hbox",children:[{type:"checkbox",id:"menubar",label:g.popupMenuBar,setup:J,commit:y},{type:"checkbox",id:"fullscreen",label:g.popupFullScreen,setup:J,commit:y}]},{type:"hbox",children:[{type:"checkbox",id:"scrollbars",label:g.popupScrollBars,setup:J,commit:y},{type:"checkbox",id:"dependent",label:g.popupDependent,setup:J,commit:y}]},{type:"hbox",children:[{type:"text",widths:["50%","50%"],labelLayout:"horizontal",label:C.width,id:"width",setup:J,commit:y},{type:"text",labelLayout:"horizontal",widths:["50%","50%"],label:g.popupLeft,id:"left",setup:J,commit:y}]},{type:"hbox",children:[{type:"text",labelLayout:"horizontal",widths:["50%","50%"],label:C.height,id:"height",setup:J,commit:y},{type:"text",labelLayout:"horizontal",label:g.popupTop,widths:["50%","50%"],id:"top",setup:J,commit:y}]}]}]}]},{id:"upload",label:g.upload,title:g.upload,hidden:true,filebrowser:"uploadButton",elements:[{type:"file",id:"upload",label:C.upload,style:"height:40px",size:29},{type:"fileButton",id:"uploadButton",label:C.uploadSubmit,filebrowser:"info:url","for":["upload","upload"]}]},{id:"advanced",label:g.advanced,title:g.advanced,hidden:true,elements:[{id:"msg",type:"html",html:"Advanced Options Still in Preperation"},{type:"vbox",padding:1,hidden:true,children:[{type:"hbox",widths:["45%","35%","20%"],children:[{type:"text",id:"advId",label:g.id,setup:I,commit:L},{type:"select",id:"advLangDir",label:g.langDir,"default":"",style:"width:110px",items:[[C.notSet,""],[g.langDirLTR,"ltr"],[g.langDirRTL,"rtl"]],setup:I,commit:L},{type:"text",id:"advAccessKey",width:"80px",label:g.acccessKey,maxLength:1,setup:I,commit:L}]},{type:"hbox",widths:["45%","35%","20%"],children:[{type:"text",label:g.name,id:"advName",setup:I,commit:L},{type:"text",label:g.langCode,id:"advLangCode",width:"110px","default":"",setup:I,commit:L},{type:"text",label:g.tabIndex,id:"advTabIndex",width:"80px",maxLength:5,setup:I,commit:L}]}]},{type:"vbox",padding:1,hidden:true,children:[{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:g.advisoryTitle,"default":"",id:"advTitle",setup:I,commit:L},{type:"text",label:g.advisoryContentType,"default":"",id:"advContentType",setup:I,commit:L}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:g.cssClasses,"default":"",id:"advCSSClasses",setup:I,commit:L},{type:"text",label:g.charset,"default":"",id:"advCharset",setup:I,commit:L}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:g.rel,"default":"",id:"advRel",setup:I,commit:L},{type:"text",label:g.styles,"default":"",id:"advStyles",validate:CKEDITOR.dialog.validate.inlineStyle(b.lang.common.invalidInlineStyle),setup:I,commit:L}]}]}]}],onShow:function(){var R=this.getParentEditor(),Q=R.getSelection(),P=null;if((P=M.getSelectedLink(R))&&P.hasAttribute("href")){Q.selectElement(P)}else{P=null}this.setupContent(m.apply(this,[R,P]))},onOk:function(){var X=new RegExp(oDokuWiki_FCKEditorInstance.imageUploadAllowedExtensions);var Z={},S=[],at={},ar=this,U=this.getParentEditor();this.commitContent(at);var aj=false;switch(at.type||"url"){case"media":if(document.getElementById(fckgMediaInputId).value){at.url.url=document.getElementById(fckgMediaInputId).value}at.adv.advTitle=at.url.url;var ap=at.url.url.match(/(\.(\w+))$/);at.url.url=U.config.doku_url+"doku.php?id="+at.url.url;if(ap[1].match(X)){at.adv.advContentType="linkonly"}else{at.adv.advContentType="other_mime";aj=true}at.adv.advCSSClasses="media mediafile";if(ap){at.adv.advCSSClasses+=" mf_"+ap[2]}var ae=(at.url&&at.url.protocol!=undefined)?at.url.protocol:"http://",V=(at.url&&CKEDITOR.tools.trim(at.url.url))||"";Z["data-cke-saved-href"]=(V.indexOf("/")===0)?V:ae+V;break;case"internal":if(!at.url.url){at.url.url=document.getElementById(fckgInternalInputId).value}at.url.url=at.url.url.replace(/^.*?\/data\/pages\//,"");at.url.url=at.url.url.replace(/^\:/,"");at.url.url=":"+at.url.url.replace(/\//g,":");at.adv.advCSSClasses="wikilink1";at.adv.advTitle=at.url.url;at.url.url=U.config.doku_url+"doku.php?id="+at.url.url;case"url":var ae=(at.url&&at.url.protocol!=undefined)?at.url.protocol:"http://",V=(at.url&&CKEDITOR.tools.trim(at.url.url))||"";Z["data-cke-saved-href"]=(V.indexOf("/")===0)?V:ae+V;break;case"anchor":var av=(at.anchor&&at.anchor.name),af=(at.anchor&&at.anchor.id);Z["data-cke-saved-href"]="#"+(av||af||"");break;case"samba":if(!at.url.url){at.url.url=document.getElementById(N()).value}if(!at.url.url){alert("Missing Samba Url");return false}at.url.protocol="";var ae="";V=(at.url&&CKEDITOR.tools.trim(at.url.url))||"";Z["data-cke-saved-href"]=(V.indexOf("/")===0)?V:ae+V;at.adv.advCSSClasses="windows";at.adv.advTitle=at.url.url;break;case"email":var R,ah=at.email,T=ah.address;switch(j){case"":case"encode":var W=encodeURIComponent(ah.subject||""),aa=encodeURIComponent(ah.body||"");var Y=[];W&&Y.push("subject="+W);aa&&Y.push("body="+aa);Y=Y.length?"?"+Y.join("&"):"";if(j=="encode"){R=["javascript:void(location.href='mailto:'+",u(T)];Y&&R.push("+'",B(Y),"'");R.push(")")}else{R=["mailto:",T,Y]}break;default:var ag=T.split("@",2);ah.name=ag[0];ah.domain=ag[1];R=["javascript:",e(ah)]}Z["data-cke-saved-href"]=R.join("");break}if(at.target){if(at.target.type=="popup"){var ak=["window.open(this.href, '",at.target.name||"","', '"];var ao=["resizable","status","location","toolbar","menubar","fullscreen","scrollbars","dependent"];var aq=ao.length;var ad=function(aw){if(at.target[aw]){ao.push(aw+"="+at.target[aw])}};for(var am=0;am<aq;am++){ao[am]=ao[am]+(at.target[ao[am]]?"=yes":"=no")}ad("width");ad("left");ad("height");ad("top");ak.push(ao.join(","),"'); return false;");Z["data-cke-pa-onclick"]=ak.join("");S.push("target")}else{if(at.target.type!="notSet"&&at.target.name){Z.target=at.target.name}else{S.push("target")}S.push("data-cke-pa-onclick","onclick")}}if(at.adv){var ai=function(aw,ax){var ay=at.adv[aw];if(ay){Z[ax]=ay}else{S.push(ax)}};ai("advId","id");ai("advLangDir","dir");ai("advAccessKey","accessKey");if(at.adv.advName){Z.name=Z["data-cke-saved-name"]=at.adv.advName}else{S=S.concat(["data-cke-saved-name","name"])}ai("advLangCode","lang");ai("advTabIndex","tabindex");if(!aj){ai("advTitle","title")}ai("advContentType","type");ai("advCSSClasses","class");ai("advCharset","charset");ai("advStyles","style");ai("advRel","rel")}var au=U.getSelection();Z.href=Z["data-cke-saved-href"];if(!this._.selectedElement){var Q=au.getRanges(true);if(Q.length==1&&Q[0].collapsed){var ac=new CKEDITOR.dom.text(at.type=="email"?at.email.address:Z["data-cke-saved-href"],U.document);Q[0].insertNode(ac);Q[0].selectNodeContents(ac);au.selectRanges(Q)}var an=new CKEDITOR.style({element:"a",attributes:Z});an.type=CKEDITOR.STYLE_INLINE;an.apply(U.document)}else{var P=this._.selectedElement,al=P.data("cke-saved-href"),ab=P.getHtml();P.setAttributes(Z);P.removeAttributes(S);if(at.adv&&at.adv.advName&&CKEDITOR.plugins.link.synAnchorSelector){P.addClass(P.getChildCount()?"cke_anchor":"cke_anchor_empty")}if(al==ab||at.type=="email"&&ab.indexOf("@")!=-1){P.setHtml(at.type=="email"?at.email.address:Z["data-cke-saved-href"])}au.selectElement(P);delete this._.selectedElement}if(ac&&at.adv.advTitle){ac.setText(at.adv.advTitle)}},onLoad:function(){oDokuWiki_FCKEditorInstance.isDwikiImage=false;fckgInternalInputId=this.getContentElement("info","internal").getInputElement().$.id;fckgMediaInputId=this.getContentElement("info","media").getInputElement().$.id;z=this.getContentElement("info","samba").getInputElement().$.id;if(!b.config.linkShowAdvancedTab){this.hidePage("advanced")}if(!b.config.linkShowTargetTab){this.hidePage("target")}this.showPage("info")},onFocus:function(){var P=this.getContentElement("info","linkType"),Q;if(P&&P.getValue()=="url"){Q=this.getContentElement("info","url");Q.select()}}}});